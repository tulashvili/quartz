---
created: 2025-01-20T16:13
updated: 2025-01-27T17:22
draft: true
---
- По api удалить не получилось, тк запрос вида `curl -u "username:password" "http://<mmonit-url>/api/3/hosts/list"` отдает `404`
- Прибегнул к api потому, что после удаления вручную 100 с лишним серверов успехом это не увенчалось
	- хотя в [документации](https://www.mmonit.com/documentation/mmonit_manual.pdf) явно сказано, что это должно помочь
- Тогда, пообщавшись с коллегами, я решил сделать вот что:
	- останавливаем монит на сервере
	- удаляем его
	- затем вручную удаляем из веб-морды
	- так удаляется успешно
- Ввиду того, что хостов очень много необходимо сделать вот что:
	- стянуть список хостов в формате: ^t36n73
```
<host> ansible_host=<ip>
```
[[Работа с файлами в python]]
[[Работа со строками в Python]]
Список всех хостов мы можем найти в нескольких местах:
- Удаленный `/etc/hosts`, доступный по определенному url
- Netbox
- Terraform

Полученный список хостов вставить в инвентарь ансибл
Затем написать простой плейбук, который пройдется по всем хостам, остановить монит и затем удалит его